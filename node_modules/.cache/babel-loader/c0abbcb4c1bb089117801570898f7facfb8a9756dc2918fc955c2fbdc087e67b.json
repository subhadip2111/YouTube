{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/subhadip/OneDrive/Desktop/my-youtube/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _defineProperty from\"C:/Users/subhadip/OneDrive/Desktop/my-youtube/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _asyncToGenerator from\"C:/Users/subhadip/OneDrive/Desktop/my-youtube/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/subhadip/OneDrive/Desktop/my-youtube/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{toggleMenu}from\"../utils/appSlice\";import{YOUTUBE_SEARCH_API}from'../utils/constants';import{cacheResults}from\"../utils/searchSlice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Head=function Head(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),searchQuery=_useState2[0],setSearchQuery=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),suggestions=_useState4[0],setSuggestions=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showSuggestions=_useState6[0],setShowSuggestions=_useState6[1];var searchCache=useSelector(function(store){return store.search;});var dispatch=useDispatch();/**\r\n   *  searchCache = {\r\n   *     \"iphone\": [\"iphone 11\", \"iphone 14\"]\r\n   *  }\r\n   *  searchQuery = iphone\r\n   */useEffect(function(){var timer=setTimeout(function(){if(searchCache[searchQuery]){setSuggestions(searchCache[searchQuery]);}else{getSearchSugsestions();}},200);return function(){clearTimeout(timer);};},[searchQuery]);var getSearchSugsestions=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(YOUTUBE_SEARCH_API+searchQuery);case 2:data=_context.sent;_context.next=5;return data.json();case 5:json=_context.sent;//console.log(json[1]);\nsetSuggestions(json[1]);// update cache\ndispatch(cacheResults(_defineProperty({},searchQuery,json[1])));case 8:case\"end\":return _context.stop();}},_callee);}));return function getSearchSugsestions(){return _ref.apply(this,arguments);};}();var toggleMenuHandler=function toggleMenuHandler(){dispatch(toggleMenu());};return/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-flow-col p-5 m-2 shadow-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex col-span-1\",children:[/*#__PURE__*/_jsx(\"img\",{onClick:function onClick(){return toggleMenuHandler();},className:\"h-8 cursor-pointer\",alt:\"menu\",src:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAARVBMVEX///8jHyAgHB0OBQgMAAWlpKQpJSaenZ309PUAAAAIAAD8/Pz5+fna2tqop6dvbW1oZmevrq4tKivFxMQYExRiYGC+vr7Dc4WrAAABB0lEQVR4nO3cS3LCMBAFQGIIIBPbhN/9jxqSyiIsTUnlydB9g1eSNV5MvdUKAAAAAAAAAAAAAAAAXtEwvscwDk3yHabSb2Loy/TRIOHUv8XRH+sHHMrSqR6U+hd1jHSE90P8lHC2/Lc0/0vzMy3WMdynxaFBwu+Jv4uh0cQHAAAAAAAAAIB59jG0ijdcT9sYTtcmK0PncumiuJRz/YD7bbf0ut4f3br+GvQt2PblrXrC3WbpUA/6sXrC/GeY/zvM/5aGmofHZiu0S//M/GoVDwAAAAAAAAAAZsjeuRerN1HL7hPy95fm76DNnzD/Lc3/0rxAJ3v+Xn0AAAAAAAAAAAAAAAD4T74AYhs1O+vt3ioAAAAASUVORK5CYII=\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:/*#__PURE__*/_jsx(\"img\",{className:\"h-8 mx-2\",alt:\"youtube-logo\",src:\"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/YouTube_Logo_2017.svg/2560px-YouTube_Logo_2017.svg.png\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-10 px-10\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{className:\"px-5 w-1/2 border border-gray-400 p-2 rounded-l-full\",type:\"text\",value:searchQuery,onChange:function onChange(e){return setSearchQuery(e.target.value);},onFocus:function onFocus(){return setShowSuggestions(true);},onBlur:function onBlur(){return setShowSuggestions(false);}}),/*#__PURE__*/_jsx(\"button\",{className:\"border border-gray-400 px-5 py-2 rounded-r-full bg-gray-100\",children:\"\\uD83D\\uDD0D\"})]}),showSuggestions&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed bg-white py-2 px-2 w-[37rem] shadow-lg rounded-lg border border-gray-100\",children:/*#__PURE__*/_jsx(\"ul\",{children:suggestions.map(function(s){return/*#__PURE__*/_jsxs(\"li\",{className:\"py-2 px-3 shadow-sm hover:bg-gray-100\",children:[\"\\uD83D\\uDD0D \",s]},s);})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-span-1\",children:/*#__PURE__*/_jsx(\"img\",{className:\"h-8\",alt:\"user\",src:\"https://www.iconpacks.net/icons/2/free-user-icon-3296-thumb.png\"})})]});};export default Head;","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","toggleMenu","YOUTUBE_SEARCH_API","cacheResults","jsx","_jsx","jsxs","_jsxs","Head","_useState","_useState2","_slicedToArray","searchQuery","setSearchQuery","_useState3","_useState4","suggestions","setSuggestions","_useState5","_useState6","showSuggestions","setShowSuggestions","searchCache","store","search","dispatch","timer","setTimeout","getSearchSugsestions","clearTimeout","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","json","wrap","_callee$","_context","prev","next","fetch","sent","_defineProperty","stop","apply","arguments","toggleMenuHandler","className","children","onClick","alt","src","href","type","value","onChange","e","target","onFocus","onBlur","map","s"],"sources":["C:/Users/subhadip/OneDrive/Desktop/my-youtube/src/component/Head.js"],"sourcesContent":["\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { toggleMenu } from \"../utils/appSlice\";\r\nimport { YOUTUBE_SEARCH_API } from '../utils/constants';\r\nimport { cacheResults } from \"../utils/searchSlice\";\r\n\r\n\r\nconst Head = () => {\r\n\r\n\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [suggestions, setSuggestions] = useState([]);\r\n  const [showSuggestions, setShowSuggestions] = useState(false);\r\n\r\n  const searchCache = useSelector((store) => store.search);\r\n  const dispatch = useDispatch();\r\n\r\n  /**\r\n   *  searchCache = {\r\n   *     \"iphone\": [\"iphone 11\", \"iphone 14\"]\r\n   *  }\r\n   *  searchQuery = iphone\r\n   */\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      if (searchCache[searchQuery]) {\r\n        setSuggestions(searchCache[searchQuery]);\r\n      } else {\r\n        getSearchSugsestions();\r\n      }\r\n    }, 200);\r\n\r\n    return () => {\r\n      clearTimeout(timer);\r\n    };\r\n  }, [searchQuery]);\r\n\r\n  const getSearchSugsestions = async () => {\r\n    const data = await fetch(YOUTUBE_SEARCH_API + searchQuery);\r\n    const json = await data.json();\r\n    //console.log(json[1]);\r\n    setSuggestions(json[1]);\r\n\r\n    // update cache\r\n    dispatch(\r\n      cacheResults({\r\n        [searchQuery]: json[1],\r\n      })\r\n    );\r\n  };\r\n\r\n  const toggleMenuHandler = () => {\r\n    dispatch(toggleMenu());\r\n  };\r\n\r\n  return (\r\n    <div className=\"grid grid-flow-col p-5 m-2 shadow-lg\">\r\n      \r\n     \r\n      <div className=\"flex col-span-1\">\r\n        <img\r\n          onClick={() => toggleMenuHandler()}\r\n          className=\"h-8 cursor-pointer\"\r\n          alt=\"menu\"\r\n          src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAARVBMVEX///8jHyAgHB0OBQgMAAWlpKQpJSaenZ309PUAAAAIAAD8/Pz5+fna2tqop6dvbW1oZmevrq4tKivFxMQYExRiYGC+vr7Dc4WrAAABB0lEQVR4nO3cS3LCMBAFQGIIIBPbhN/9jxqSyiIsTUnlydB9g1eSNV5MvdUKAAAAAAAAAAAAAAAAXtEwvscwDk3yHabSb2Loy/TRIOHUv8XRH+sHHMrSqR6U+hd1jHSE90P8lHC2/Lc0/0vzMy3WMdynxaFBwu+Jv4uh0cQHAAAAAAAAAIB59jG0ijdcT9sYTtcmK0PncumiuJRz/YD7bbf0ut4f3br+GvQt2PblrXrC3WbpUA/6sXrC/GeY/zvM/5aGmofHZiu0S//M/GoVDwAAAAAAAAAAZsjeuRerN1HL7hPy95fm76DNnzD/Lc3/0rxAJ3v+Xn0AAAAAAAAAAAAAAAD4T74AYhs1O+vt3ioAAAAASUVORK5CYII=\"\r\n        />\r\n        <a href=\"/\">\r\n          <img\r\n            className=\"h-8 mx-2\"\r\n            alt=\"youtube-logo\"\r\n            src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/YouTube_Logo_2017.svg/2560px-YouTube_Logo_2017.svg.png\"\r\n          />\r\n        </a>\r\n      </div>\r\n      <div className=\"col-span-10 px-10\">\r\n        <div>\r\n          <input\r\n            className=\"px-5 w-1/2 border border-gray-400 p-2 rounded-l-full\"\r\n            type=\"text\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            onFocus={() => setShowSuggestions(true)}\r\n            onBlur={() => setShowSuggestions(false)}\r\n          />\r\n          <button className=\"border border-gray-400 px-5 py-2 rounded-r-full bg-gray-100\">\r\n            üîç\r\n          </button>\r\n        </div>\r\n        {showSuggestions && (\r\n          <div className=\"fixed bg-white py-2 px-2 w-[37rem] shadow-lg rounded-lg border border-gray-100\">\r\n            <ul>\r\n              {suggestions.map((s) => (\r\n                <li key={s} className=\"py-2 px-3 shadow-sm hover:bg-gray-100\">\r\n                  üîç {s}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div className=\"col-span-1\">\r\n        <img\r\n          className=\"h-8\"\r\n          alt=\"user\"\r\n          src=\"https://www.iconpacks.net/icons/2/free-user-icon-3296-thumb.png\"\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Head;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}